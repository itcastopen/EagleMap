{"version":3,"file":"static/js/301.1069381e.chunk.js","mappings":"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","sources":["utils/request.ts","api/api.ts","components/NoData.tsx","components/React-CMap.tsx","components/Search.tsx","pages/fence/details.tsx","utils/tool.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosError, AxiosResponse } from 'axios';\nimport { MessagePlugin } from 'tdesign-react';\nimport { getToken } from '../utils/cookie';\n\ninterface ResponseData<T> {\n  code: number;\n  data: T;\n  msg: string;\n}\n\n// 指定 axios 请求类型\n\n(axios.defaults.headers as any) = {\n  'Content-Type': 'application/json;charset=utf-8',\n};\n\n// 指定请求地址\naxios.defaults.baseURL = '' // : 'https://mock.boxuegu.com/mock/2894/';\n\n// 添加请求拦截器\naxios.interceptors.request.use(\n  (config: AxiosRequestConfig ) => {\n    const token = getToken();\n    // 获取用户token，用于校验\n    /* eslint-disable  no-param-reassign */\n    if (token) {\n      (config.headers as any).Authorization = token;\n    }\n    return config;\n  },\n  (error: AxiosError) => Promise.reject(error),\n);\n\n// 添加响应拦截器，拦截登录过期或者没有权限\n\naxios.interceptors.response.use(\n  (response: AxiosResponse<ResponseData<any>>) => {\n    if (!response.data) {\n      return Promise.resolve(response);\n    }\n\n    // 请求成功\n    if (response.status === 200) {\n      return response.data as any;\n    }\n\n    // 请求成功，状态不为成功时\n    MessagePlugin.error(response.data.msg);\n\n    return Promise.reject(new Error(response.data.msg));\n  },\n  (error: AxiosError) => {\n    MessagePlugin.error(error.message);\n\n    return Promise.reject(error);\n  },\n);\n\n// 统一发起请求的函数\nexport function request<T>(options: AxiosRequestConfig) {\n  return axios.request<T>(options);\n}\n","import { request } from '../utils/request';\n// import { UserState } from '../store/module/user';\n\nexport interface UserLoginDataRq  {\n  code: number,\n  msg: string,\n  data: {\n    token: string\n  }\n}\n\nexport interface UserLoginData {\n  userName: string;\n  password: string;\n}\n\n// 登录接口\nexport function apiUserLogin(data: UserLoginData) {\n  return request<UserLoginDataRq>({\n    method: 'POST',\n    url: '/sys/login',\n    data,\n    params:data,\n  });\n}\n\n// 系统配置\nexport function apiSysConfig() {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/config',\n  });\n}\n\n// 轨迹服务管理\nexport function apiTraceServer(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace/server',\n    data,\n    params:data,\n  });\n}\n\n// 轨迹列表\nexport function apiTraceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace',\n    data,\n    params:data,\n  });\n}\n\n// 删除轨迹\nexport function apiDeleteTrace(data: string) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/trace/${data}`,\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表\nexport function apiFenceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/fence',\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表详情\nexport function apiFenceDetails(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n  });\n}\n// 删除电子围栏\nexport function apiDeleteFence(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n  });\n}\n// 终端列表\nexport function apiTerminal(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/terminal',\n    data,\n    params:data,\n  });\n}\n\n// 删除终端\nexport function apiDeleteTerminalld(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/terminal/${data.terminalId}`,\n    data,\n  });\n}","import imgUrl from './../assets/images/nodata.png'\nexport default function nodata(){\n    return (\n        <div className='noData'>\n            <img src={imgUrl} width=\"245\" height=\"201\" alt=\"\" />\n            <div>没有数据orz</div>\n        </div>\n    )\n}","import { Component, ReactNode } from \"react\";\n\nimport  CMap, { CZMapTP }  from 'czmap';\n\ntype Props = {\n    options: CZMapTP\n}\nexport class CZMap extends Component<Props> {\n    constructor(props:Props){\n        super(props)\n    }\n    \n    componentDidMount(){\n        new CMap(this.props.options)\n    }\n\n    render(): ReactNode {\n        return (<div id=\"baidumap\" style={{width: '100%', height: '560px'}} ></div>)\n    }\n}","import { useEffect, useState } from \"react\";\nimport { Input, InputValue } from \"tdesign-react\";\nimport { SearchIcon } from \"tdesign-icons-react\";\nexport type searchConfType = {label: string; key:string, value: string, callback:Function };\n\nexport function Search(props: any) {\n\n  const data = props.searchConf;\n  const [params, setParams] = useState({})\n  let initValue:any = {}\n\n  useEffect(()=> {\n    data.forEach((el:searchConfType) => {\n      initValue[el.key] = el.value != '' ? el.value : undefined;\n    });\n    setParams(initValue)\n  },[])\n  \n  return (\n    <div className=\"searchCont\">\n      {data.map((item:searchConfType, index: number) => (\n        <div className=\"searchitem\" key={index}>\n          <div className=\"label\">{item.label}</div>\n          <Input\n            // suffixIcon={<SearchIcon />}\n            placeholder=\"请输入\"\n            value={(params as any)[item.key]}\n            type=\"text\"\n            onEnter={() => {\n              item.callback(params);\n            }}\n            onChange={(value: InputValue)=>{\n              const par:any = {} \n              par[item.key] = value\n              setParams({...params, ...par})\n            }}\n          />\n          <SearchIcon className=\"searchIcon\" name=\"search\" size=\"medium\" onClick={()=>{\n            item.callback(params);\n          }} />\n        </div>\n      ))}\n    </div>\n  );\n}","import { Search, searchConfType } from \"../../components/Search\";\nimport { CZMap } from \"./../../components/React-CMap\";\nimport { Breadcrumb } from \"tdesign-react\";\nimport { useState, useEffect } from \"react\";\nimport { Table, Dialog, Button, MessagePlugin } from \"tdesign-react\";\nimport { ErrorCircleFilledIcon } from \"tdesign-icons-react\";\nimport  NoData  from '../../components/NoData'\nimport {fenceDataChange} from '../../utils/tool'\nimport { apiTerminal, apiDeleteTerminalld } from \"../../api/api\";\nconst { BreadcrumbItem } = Breadcrumb;\n\ntype trajectoryData = {\n  name: string;\n  id: string;\n  serverName: string;\n  serverId: string;\n  trajectoryLength: string;\n  time: string;\n  createTime: string;\n}[];\n\nfunction TrajectoryDetails(props: any) {\n  // 搜索数据定义\n  const serverId = props.match.params.id;\n  const listData = props.location.state;\n  const searchConf: searchConfType[] = [\n    {\n      label: \"设备名称:\",\n      key: \"terminalName\",\n      value: \"\",\n      callback: searchHandle,\n    },\n    { label: \"设备ID:\", key: \"terminalId\", value: \"\", callback: searchHandle },\n  ];\n\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const [terminalData, setTerminalData] = useState([]);\n  const [total, setTotal] = useState(30);\n  const [visible, setVisible] = useState(false);\n  const [deleteDish, setDeleteDish] = useState(\"\");\n  const [provider, setProvider] = useState(\"BAIDU\");\n  const [searchValue, setSearchValue] = useState({});\n  const type = listData.provider == 'BAIDU' ? 'BMAP' : listData.provider\n  const pointData = JSON.parse(listData.param)\n  // 围栏类型 // CIRCLE-圆形，POLYGON-多边形，POLYLINE-线性，DISTRICT-行政区\n  // console.log(listData, pointData)\n  const enclosureData = fenceDataChange(type, listData.type, pointData)\n  let enclosure = {\n    strokeColor: \"#6699FF\",\n    strokeWeight: 2,\n    strokeOpacity: 1,\n  }\n  enclosure = Object.assign(enclosure, enclosureData)\n  console.log(333,enclosure)\n  // switch(listData.type){\n  //   case 'CIRCLE':{\n  //     enclosure.type = 'circle'\n  //     enclosure.point = pointData.\n  //     enclosure.radius = pointData.radius\n  //     break\n  //   }\n  //   case 'POLYGON' || 'POLYLINE':{\n  //     enclosure.type = 'polygon'\n  //     break\n  //   }\n  //   case 'DISTRICT':{\n  //     enclosure.type = 'district'\n  //     break\n  //   }\n  // }\n  const options = {\n    id: \"baidumap\", // 配置地图的着陆点  id\n    mapAk: \"\", // 写入Ak\n    poiText: true, //是否显示POI信息\n    poiIcon: true, //是否显示POI图标信息\n    type, // 设置使用地图的类型 BMAP 百度地图、 TMAP 腾讯、、AMAP 高德\n    points: [116.404, 39.915], // 中心点设置\n    areaName: \"上海市\", // 中心城市\n    zoom: 11, // 缩放级别\n    enableScrollWheel: false, // 开启滚轮\n    isScaleCtrl: true, // 添加比例尺控件\n    isZoomCtrl: true, // 添加缩放控件\n    navi3DCtrl: false, // 添加3D控件\n    enclosure,\n  };\n  console.log(options)\n  // 生命周期调用数据\n  useEffect(() => {\n    getData();\n  }, []);\n  // 获取数据\n  function getData(items?: any) {\n    apiTerminal({\n      page: items?.page ?? page,\n      pageSize: items?.pageSize ?? pageSize,\n      terminalName: items?.terminalName,\n      terminalId: items?.terminalId,\n      provider:items?.provider ?? provider,\n      serverId,\n    }).then((res: any) => {\n      const { data } = res;\n      if (res.code === 0) {\n        setTerminalData(data.items);\n        setTotal(data.total);\n      } else {\n        console.log(\"请求出错！\");\n      }\n    });\n  }\n\n  // 搜索功能\n  function searchHandle(searchVal: any) {\n    setPage(1);\n    setPageSize(10);\n    setSearchValue(searchVal);\n    getData({ setTerminalPage: 1, setTerminalPageSize: 10, ...searchVal });\n  }\n\n  // 删除功能\n  const deleteHandle = () => {\n    if (deleteDish) {\n      apiDeleteTerminalld(deleteDish);\n      setDeleteDish(\"\");\n      setVisible(false);\n    } else {\n      MessagePlugin.error(\"删除请求出错了\");\n    }\n  };\n  // 关闭弹框\n  const handleFooterClose = () => {\n    setVisible(false);\n  };\n\n  // 更改单选类型 - 不同服务商切换\n  const changeHandle = (val: any) => {\n    setProvider(val);\n    getData({searchValue, provider:val});\n  };\n  return (\n    <>\n      <div className=\"BreadcrumbCont\">\n        <Breadcrumb maxItemWidth=\"200px\" theme=\"light\">\n          <BreadcrumbItem>电子围栏</BreadcrumbItem>\n          <BreadcrumbItem>详情</BreadcrumbItem>\n        </Breadcrumb>\n      </div>\n      <div className=\"container trajectory_details\">\n        <div className=\"detailCont\">\n        <Table\n          data={[listData]}\n          columns={[\n            {\n              align: \"left\",\n              className: \"test\",\n              ellipsis: true,\n              colKey: \"name\",\n              title: \"围栏名称\",\n              minWidth: 200,\n            },\n            {\n              align: \"left\",\n              className: \"test4\",\n              ellipsis: true,\n              colKey: \"fenceId\",\n              title: \"围栏ID\",\n              minWidth: 200,\n            },\n            {\n              align: \"left\",\n              className: \"test4\",\n              ellipsis: true,\n              cell({ row }) {\n                switch (row?.provider) {\n                  case \"BAIDU\":\n                    return <>百度地图</>;\n                  case \"AMAP\":\n                    return <>高德地图</>;\n                  case \"QQ\":\n                    return <>腾讯地图</>;\n                  default:\n                    return null;\n                }\n              },\n              title: \"服务商名称\",\n              minWidth: 200,\n            },\n            {\n              align: \"left\",\n              className: \"test4\",\n              ellipsis: true,\n              colKey: \"serverId\",\n              title: \"服务ID\",\n              minWidth: 200,\n            },\n            {\n              align: \"left\",\n              className: \"test4\",\n              ellipsis: true,\n              colKey: \"created\",\n              title: \"创建时间\",\n              minWidth: 200,\n            },\n            {\n              align: \"left\",\n              className: \"test4\",\n              ellipsis: true,\n              colKey: \"updated\",\n              title: \"更新时间\",\n              minWidth: 200,\n            },\n          ]}\n          rowKey=\"index\"\n          verticalAlign=\"top\"\n          bordered\n          hover\n        ></Table>\n          <div className=\"DetBMap\">\n            <CZMap options={options} />\n          </div>\n        </div>\n        <div className=\"searchCont\">\n          <Search searchConf={searchConf}></Search>\n          <div className=\"tdesign-demo-block-row\">\n           \n          </div>\n        </div>\n        <div className=\"tableCont\">\n        {terminalData && terminalData.length > 0? (<Table\n            data={terminalData}\n            columns={[\n              {\n                align: \"left\",\n                className: \"test\",\n                ellipsis: true,\n                colKey: \"name\",\n                title: \"设备名称\",\n              },\n              {\n                align: \"left\",\n                className: \"test\",\n                ellipsis: true,\n                colKey: \"provider\",\n                cell({ row }) {\n                  switch (row?.provider) {\n                    case \"BAIDU\":\n                    return <>百度地图</>;\n                  case \"AMAP\":\n                    return <>高德地图</>;\n                  case \"QQ\":\n                    return <>腾讯地图</>;\n                    default:\n                      return null;\n                  }\n                },\n                title: \"服务商\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"id\",\n                title: \"服务ID\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"created\",\n                title: \"创建时间\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"updated\",\n                title: \"更新时间\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                title: \"范围\",\n                cell({ row }) {\n                  switch (row?.isOut) {\n                    case true:\n                      return <p className=\"succ\">未超出</p>;\n                    case false:\n                      return <p className=\"fail\">已超出</p>;\n                    default:\n                      return <>--</>;\n                  }\n                },\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"desc\",\n                title: \"描述\",\n              },\n              {\n                colKey: \"op\",\n                width: 100,\n                title: \"操作\",\n                align: \"center\",\n                fixed: \"right\",\n                cell(record: any) {\n                  return (\n                    <>\n                      <a\n                        className=\"link\"\n                        onClick={() => {\n                          setDeleteDish(record.row.terminalId);\n                          setVisible(true);\n                        }}\n                      >\n                        删除\n                      </a>\n                    </>\n                  );\n                },\n              },\n            ]}\n            rowKey=\"index\"\n            verticalAlign=\"top\"\n            bordered\n            hover\n            pagination={{\n              defaultCurrent: page,\n              defaultPageSize: pageSize,\n              total,\n              showJumper: true,\n              onChange(pageInfo) {\n                setPageSize(pageInfo.pageSize);\n                setPage(pageInfo.current);\n                getData();\n              },\n            }}\n          ></Table>) : (<NoData />)}\n          <Dialog\n            header={\n              <>\n                <ErrorCircleFilledIcon style={{ color: \"#ED7B2F\" }} />\n                <span>确定要删除这条轨迹吗？</span>\n              </>\n            }\n            footer={\n              <>\n                <Button\n                  theme=\"default\"\n                  variant=\"outline\"\n                  onClick={() => setVisible(false)}\n                >\n                  取消\n                </Button>\n                <Button theme=\"danger\" onClick={() => deleteHandle()}>\n                  删除\n                </Button>\n              </>\n            }\n            visible={visible}\n            onClose={handleFooterClose}\n          ></Dialog>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default TrajectoryDetails;\n","\n// 地图路径转换 后台数据转对应数据\n\nexport function pathChangeHandle(type:string, path:{string:any}[]):[]{\n    let pathList:any = [];\n    if (type === 'BMAP'){\n      pathList = path.map((it:any) => ({'lng': it.longitude, 'lat': it.latitude}))\n    } else if (type === 'AMAP'){\n      pathList = path.map((it:any) => {\n        const point = it.location.split(',')\n        return {'lng':point[0], 'lat':point[1]}\n      })\n    } else if(type == 'TMAP'){\n      console.log('暂时不开发！')\n    }\n    return pathList\n  }\n// 围栏数据转换\n/**\n * 高德：\n圆形围栏数据：\n{\"center\":\"116.344132,40.061937\",\"radius\":5000}\n多边形围栏数据：\n{\"points\":\"116.341622,40.063412;116.346729,40.064546;116.347072,40.060358;116.342373,40.059553\"}\n线形围栏数据：\n{\"bufferradius\":200,\"points\":\"116.347115,40.060325;116.342909,40.05957;116.336493,40.058338\"}\n行政区围栏：\n{\"adcode\":110105}\n\n * 百度：\n圆形围栏数据：\n{\"latitude\":\"40.061937\",\"radius\":5000,\"longitude\":\"116.344132\"}\n多边形围栏数据：\n{\"vertexes\":\"40.063412,116.341622;40.064546,116.346729;40.060358,116.347072;40.059553,116.342373\"}\n线形围栏数据：\n{\"offset\":200,\"vertexes\":\"40.060325,116.347115;40.05957,116.342909;40.058338,116.336493\"}\n行政区围栏：\n{\"keyword\":\"北京市\"}\n * **/\nexport function fenceDataChange(type:string,shape:string,data:any){\n  let fenceData:any = {}\n  if (type == 'AMAP' && shape === 'CIRCLE'){\n    fenceData.point = data.center.split(',')\n    fenceData.radius = data.radius\n    fenceData.type = 'circle'\n  } else if (type == 'AMAP' && shape === 'POLYGON' || type == 'AMAP' && shape === 'POLYLINE'){\n    fenceData.type = 'polygon'\n    const dataArray = data.points.split(';')\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[0], lat: point[1]}\n    })\n  } else if (type == 'BMAP' && shape === 'CIRCLE'){\n    fenceData.point = [data.longitude, data.latitude]\n    fenceData.radius = data.radius\n    fenceData.type = 'circle'\n  } else if (type == 'BMAP' && shape === 'POLYGON' || type == 'BMAP' && shape === 'POLYLINE'){\n    fenceData.type = 'polygon'\n    const dataArray = data.vertexes.split(';')\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[1], lat: point[0]}\n    })\n  }\n\n  return fenceData\n}"],"names":["request","options","axios","apiUserLogin","data","method","url","params","apiSysConfig","apiTraceServer","apiTraceList","apiDeleteTrace","apiFenceList","apiDeleteFence","fenceId","apiTerminal","apiDeleteTerminalld","terminalId","config","token","getToken","headers","Authorization","error","Promise","reject","response","status","MessagePlugin","msg","Error","resolve","message","nodata","className","src","imgUrl","width","height","alt","CZMap","props","CMap","this","id","style","Component","Search","searchConf","useState","setParams","initValue","useEffect","forEach","el","key","value","undefined","map","item","index","label","I","placeholder","type","onEnter","callback","onChange","par","name","size","onClick","BreadcrumbItem","Breadcrumb","serverId","match","listData","location","state","searchHandle","page","setPage","pageSize","setPageSize","terminalData","setTerminalData","total","setTotal","visible","setVisible","deleteDish","setDeleteDish","provider","setSearchValue","pointData","JSON","parse","param","enclosureData","fenceDataChange","enclosure","strokeColor","strokeWeight","strokeOpacity","Object","assign","console","log","mapAk","poiText","poiIcon","points","areaName","zoom","enableScrollWheel","isScaleCtrl","isZoomCtrl","navi3DCtrl","getData","items","terminalName","then","res","code","searchVal","setTerminalPage","setTerminalPageSize","maxItemWidth","theme","columns","align","ellipsis","colKey","title","minWidth","cell","row","rowKey","verticalAlign","bordered","hover","length","isOut","fixed","record","pagination","defaultCurrent","defaultPageSize","showJumper","pageInfo","current","header","color","footer","variant","onClose","pathChangeHandle","path","pathList","it","longitude","latitude","point","split","shape","fenceData","center","radius","dataArray","lng","lat","vertexes"],"sourceRoot":""}
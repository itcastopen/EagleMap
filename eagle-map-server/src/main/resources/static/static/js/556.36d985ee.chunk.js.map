{"version":3,"file":"static/js/556.36d985ee.chunk.js","mappings":"+XAmEO,SAASA,EAAWC,GACzB,OAAOC,IAAAA,QAAiBD,GCnDnB,SAASE,EAAaC,GAC3B,OAAOJ,EAAyB,CAC9BK,OAAQ,OACRC,IAAK,aACLF,KAAAA,EACAG,OAAOH,IAKJ,SAASI,IACd,OAAOR,EAAyB,CAC9BK,OAAQ,MACRC,IAAK,gBAKF,SAASG,EAAeL,GAC7B,OAAOJ,EAAyB,CAC9BK,OAAQ,MACRC,IAAK,oBACLF,KAAAA,EACAG,OAAOH,IAKJ,SAASM,EAAaN,GAC3B,OAAOJ,EAAyB,CAC9BK,OAAQ,MACRC,IAAK,aACLF,KAAAA,EACAG,OAAOH,IAKJ,SAASO,EAAeP,GAC7B,OAAOJ,EAAyB,CAC9BK,OAAQ,SACRC,IAAI,cAAD,OAAgBF,EAAKQ,IACxBR,KAAAA,EACAG,OAAOH,IAKJ,SAASS,EAAaT,GAC3B,OAAOJ,EAAyB,CAC9BK,OAAQ,MACRC,IAAK,aACLF,KAAAA,EACAG,OAAOH,IAaJ,SAASU,EAAeV,GAC7B,OAAOJ,EAAyB,CAC9BK,OAAQ,SACRC,IAAI,cAAD,OAAgBF,EAAKW,SACxBX,KAAAA,EACAG,OAAOH,IAIJ,SAASY,EAAYZ,GAC1B,OAAOJ,EAAyB,CAC9BK,OAAQ,MACRC,IAAK,gBACLF,KAAAA,EACAG,OAAOH,IAKJ,SAASa,EAAoBb,GAClC,OAAOJ,EAAyB,CAC9BK,OAAQ,SACRC,IAAI,iBAAD,OAAmBF,EAAKQ,IAC3BR,KAAAA,EACAG,OAAOH,IDhGVF,IAAAA,SAAAA,QAAiC,CAChC,eAAgB,kCAIlBA,IAAAA,SAAAA,QAAyB,GAGzBA,IAAAA,aAAAA,QAAAA,KACE,SAACgB,GACC,IAAMC,GAAQC,EAAAA,EAAAA,MAMd,OAHID,IACDD,EAAOG,QAAgBC,cAAgBH,GAEnCD,KAET,SAACK,GAAD,OAAuBC,QAAQC,OAAOF,MAKxCrB,IAAAA,aAAAA,SAAAA,KACE,SAACwB,GACC,OAAKA,EAAStB,KAIU,MAApBsB,EAASC,OACJD,EAAStB,MAGM,MAApBsB,EAASC,QAAyC,MAAvBD,EAAStB,KAAKwB,QAC3CC,EAAAA,EAAAA,MACAC,OAAOC,SAASC,KAAO,UAIzBC,EAAAA,GAAAA,MAAoBP,EAAStB,KAAK8B,KAE3BV,QAAQC,OAAO,IAAIU,MAAMT,EAAStB,KAAK8B,OAfrCV,QAAQY,QAAQV,MAiB3B,SAACH,GAGC,GAFAU,EAAAA,GAAAA,MAAoBV,EAAMc,SAEX,MADAd,EAAMG,SAAUC,OAK7B,OAAOH,QAAQC,OAAOF,IAHtBM,EAAAA,EAAAA,MACAC,OAAOC,SAASC,KAAO,a,4EE1Dd,SAASM,IACpB,OACI,iBAAKC,UAAU,SAAf,WACI,gBAAKC,IAAKC,EAAQC,MAAM,MAAMC,OAAO,MAAMC,IAAI,MAC/C,8D,kIC4IZ,UA3IA,SAAiBC,GACf,OAAwBC,EAAAA,EAAAA,UAAS,GAAjC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAAgCF,EAAAA,EAAAA,UAAS,IAAzC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAAwBJ,EAAAA,EAAAA,UAAS,IAAjC,eAAO1C,EAAP,KAAa+C,EAAb,KACA,GAA0BL,EAAAA,EAAAA,UAAS,IAAnC,eAAOM,EAAP,KAAcC,EAAd,KACA,GAAgCP,EAAAA,EAAAA,UAAS,SAAzC,eAAOQ,EAAP,KAAiBC,EAAjB,KAKA,SAASC,EAAQC,GAAW,IAAD,GACzBhD,EAAAA,EAAAA,IAAe,CAACsC,KAAAA,EAAME,SAAAA,EAAUK,SAAQ,iBAAEG,QAAF,IAAEA,OAAF,EAAEA,EAAMH,gBAAR,QAAoBA,IAAYI,MAAK,SAACC,GAC5E,IAIO,EAJCvD,EAASuD,EAATvD,KACS,IAAbuD,EAAI/B,MACNuB,EAAQ/C,EAAKwD,OACbP,EAASjD,EAAKgD,QAEdnB,EAAAA,GAAAA,MAAA,UAAoB0B,EAAIzB,WAAxB,QAA+B,qCASrC,OApBA2B,EAAAA,EAAAA,YAAU,WACRL,MACC,KAmBD,iBAAKjB,UAAU,YAAf,WACE,iBAAKA,UAAU,aAAf,WACE,gBAAKuB,MAAO,CAAC,OAAS,WACtB,gBAAKvB,UAAU,yBAAf,UACE,UAAC,UAAD,CAAawB,MAAOT,EAAUU,SATlB,SAACC,GACrBV,EAAYU,GACZT,EAAQ,CAACF,SAASW,KAOV,WACE,SAAC,IAAD,CAAOF,MAAM,QAAb,uCACA,SAAC,IAAD,CAAOA,MAAM,OAAb,8CAKL3D,GAAQA,EAAK8D,OAAS,GAAI,SAAC,KAAD,CACvB9D,KAAMA,EACN+D,QAAS,CACP,CACEC,MAAO,OACP7B,UAAW,OACX8B,UAAU,EACVC,OAAQ,WACRC,KALF,YAKiB,IAARC,EAAO,EAAPA,IACL,cAAQA,QAAR,IAAQA,OAAR,EAAQA,EAAKlB,UACX,IAAK,QACH,OAAO,2DACT,IAAK,OACH,OAAO,2DACT,IAAK,KACH,OAAO,2DACT,QACE,OAAO,OAGbmB,MAAO,sBAET,CACEL,MAAO,OACP7B,UAAW,QACX8B,UAAU,EACVC,OAAQ,KACRG,MAAO,kBAET,CACEL,MAAO,OACP7B,UAAW,QACX8B,UAAU,EACVC,OAAQ,OACRG,MAAO,4BAET,CACEL,MAAO,OACP7B,UAAW,QACX8B,UAAU,EACVC,OAAQ,UACRC,KALF,YAKc,IAANC,EAAK,EAALA,IACJ,OAAOE,GAAAA,CAAOF,EAAIG,SAASC,OAAO,wBAEpCH,MAAO,4BAET,CACEL,MAAO,OACP7B,UAAW,QACX8B,UAAU,EACVC,OAAQ,UACRC,KALF,YAKc,IAANC,EAAK,EAALA,IACJ,OAAOE,GAAAA,CAAOF,EAAIK,SAASD,OAAO,wBAEpCH,MAAO,4BAET,CACEH,OAAQ,KACR5B,MAAO,IACP+B,MAAO,eACPK,MAAO,QACPP,KALF,SAKOQ,GACH,OACE,+BACE,cACExC,UAAU,OACVyC,QAAS,WACPnC,EAAMoC,QAAQC,KAAK,CACjBC,SAAS,WAAD,OAAaJ,EAAOP,IAAI5D,IAChCwE,MAAOL,EAAOP,OALpB,2CAiBVa,OAAO,QACPC,cAAc,MACdC,UAAQ,EACRC,OAAK,EACLC,WAAY,CACVC,eAAgB,EAChBC,gBAAiB,GACjBvC,MAAAA,EACAwC,YAAY,EACZ5B,SALU,SAKD6B,GACP3C,EAAY2C,EAAS5C,UACrBD,EAAQ6C,EAASC,SACjBtC,SAGQ,SAAC,IAAD,MA3Ga,Y","sources":["utils/request.ts","api/api.ts","components/NoData.tsx","pages/server/index.tsx"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosError, AxiosResponse } from 'axios';\nimport { MessagePlugin } from 'tdesign-react';\nimport { getToken, removeToken } from '../utils/cookie';\n\ninterface ResponseData<T> {\n  code: number;\n  data: T;\n  msg: string;\n}\n\n// 指定 axios 请求类型\n(axios.defaults.headers as any) = {\n  'Content-Type': 'application/json;charset=utf-8',\n};\n\n// 指定请求地址\naxios.defaults.baseURL = '' // : 'https://mock.boxuegu.com/mock/2894/';\n\n// 添加请求拦截器\naxios.interceptors.request.use(\n  (config: AxiosRequestConfig ) => {\n    const token = getToken();\n    // 获取用户token，用于校验\n    /* eslint-disable  no-param-reassign */\n    if (token) {\n      (config.headers as any).Authorization = token;\n    }\n    return config;\n  },\n  (error: AxiosError) => Promise.reject(error),\n);\n\n// 添加响应拦截器，拦截登录过期或者没有权限\n\naxios.interceptors.response.use(\n  (response: AxiosResponse<ResponseData<any>>) => {\n    if (!response.data) {\n      return Promise.resolve(response);\n    }\n    // 请求成功\n    if (response.status === 200) {\n      return response.data as any;\n    }\n    // token 超时 失效\n    if (response.status === 401 || response.data.code === 401) {\n      removeToken()\n      window.location.href = '/login'\n    }\n\n    // 请求成功，状态不为成功时\n    MessagePlugin.error(response.data.msg);\n\n    return Promise.reject(new Error(response.data.msg));\n  },\n  (error: AxiosError) => {\n    MessagePlugin.error(error.message);\n    const status = error.response!.status\n    if (status === 401) {\n      removeToken()\n      window.location.href = '/login'\n    } else {\n      return Promise.reject(error);\n    }\n  },\n);\n\n// 统一发起请求的函数\nexport function request<T>(options: AxiosRequestConfig) {\n  return axios.request<T>(options);\n}\n","import { request } from '../utils/request';\n// import { UserState } from '../store/module/user';\n\nexport interface UserLoginDataRq  {\n  code: number,\n  msg: string,\n  data: {\n    token: string\n  }\n}\n\nexport interface UserLoginData {\n  userName: string;\n  password: string;\n}\n\n// 登录接口\nexport function apiUserLogin(data: UserLoginData) {\n  return request<UserLoginDataRq>({\n    method: 'POST',\n    url: '/sys/login',\n    data,\n    params:data,\n  });\n}\n\n// 系统配置\nexport function apiSysConfig() {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/config',\n  });\n}\n\n// 轨迹服务管理\nexport function apiTraceServer(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace/server',\n    data,\n    params:data,\n  });\n}\n\n// 轨迹列表\nexport function apiTraceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace',\n    data,\n    params:data,\n  });\n}\n\n// 删除轨迹\nexport function apiDeleteTrace(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/trace/${data.id}`,\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表\nexport function apiFenceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/fence',\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表详情\nexport function apiFenceDetails(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n  });\n}\n// 删除电子围栏\nexport function apiDeleteFence(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n    params:data\n  });\n}\n// 终端列表\nexport function apiTerminal(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/terminal',\n    data,\n    params:data,\n  });\n}\n\n// 删除终端\nexport function apiDeleteTerminalld(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/terminal/${data.id}`,\n    data,\n    params:data\n  });\n}","import imgUrl from './../assets/images/nodata.png'\nexport default function nodata(){\n    return (\n        <div className='noData'>\n            <img src={imgUrl} width=\"245\" height=\"201\" alt=\"\" />\n            <div>没有数据orz</div>\n        </div>\n    )\n}","import { useEffect, useState } from 'react'\nimport { Table, Radio, MessagePlugin } from \"tdesign-react\";\nimport { apiTraceServer } from \"../../api/api\"\nimport  NoData  from '../../components/NoData'\nimport moment from 'moment'\n\nfunction Server (props: any) {\n  const [page, setPage] = useState(1)\n  const [pageSize, setPageSize] = useState(10)\n  const [data, setData] = useState([])\n  const [total, setTotal] = useState(30)\n  const [provider, setProvider] = useState(\"BAIDU\");\n  useEffect(() => {\n    getData()\n  }, [])\n  \n  function getData(item?:any){\n    apiTraceServer({page, pageSize, provider: item?.provider ?? provider }).then((res: any) => {\n      const { data } = res\n      if (res.code === 0) {\n        setData(data.items)\n        setTotal(data.total)\n      } else {\n        MessagePlugin.error(res.msg ?? \"请求出错！\");\n      }\n    })\n  }\n // 更改单选类型 - 不同服务商切换\n const changeHandle = (val: any) => {\n  setProvider(val);\n  getData({provider:val});\n};\n  return (\n    <div className='container' key=\"server\">\n      <div className=\"searchCont\">\n        <div style={{'height':'50px'}}></div>\n        <div className=\"tdesign-demo-block-row\" >\n          <Radio.Group value={provider} onChange={changeHandle}>\n            <Radio value=\"BAIDU\">百度地图</Radio>\n            <Radio value=\"AMAP\">高德地图</Radio>\n            {/* <Radio value=\"QQ\">腾讯地图</Radio> */}\n          </Radio.Group>\n        </div>\n      </div>\n      {data && data.length > 0? (<Table \n          data={data} \n          columns={[\n            {\n              align: 'left',\n              className: 'test',\n              ellipsis: true,\n              colKey: 'provider',\n              cell({ row }) {\n                switch (row?.provider) {\n                  case \"BAIDU\":\n                    return <>百度地图</>;\n                  case \"AMAP\":\n                    return <>高德地图</>;\n                  case \"QQ\":\n                    return <>腾讯地图</>;\n                  default:\n                    return null;\n                }\n              },\n              title: '服务商',\n            },\n            {\n              align: 'left',\n              className: 'test4',\n              ellipsis: true,\n              colKey: 'id',\n              title: '服务ID',\n            },\n            {\n              align: 'left',\n              className: 'test4',\n              ellipsis: true,\n              colKey: 'name',\n              title: '服务名称',\n            },\n            {\n              align: 'left',\n              className: 'test4',\n              ellipsis: true,\n              colKey: 'created',\n              cell({row}){\n                return moment(row.created).format(\"YYYY-MM-DD HH:mm:ss\")\n              },\n              title: '创建时间',\n            },\n            {\n              align: 'left',\n              className: 'test4',\n              ellipsis: true,\n              colKey: 'updated',\n              cell({row}){\n                return moment(row.updated).format(\"YYYY-MM-DD HH:mm:ss\")\n              },\n              title: '更新时间',\n            },\n            {\n              colKey: \"op\",\n              width: 120,\n              title: \"操作\",\n              fixed: \"right\",\n              cell(record: any) {\n                return (\n                  <>\n                    <a\n                      className=\"link\"\n                      onClick={() => {\n                        props.history.push({\n                          pathname: `/server/${record.row.id}`,\n                          state: record.row,\n                        });\n\n                      }}\n                    >\n                      查看终端\n                    </a>\n                  </>\n                );\n              },\n            },\n          ]} \n          rowKey=\"index\" \n          verticalAlign=\"top\"\n          bordered\n          hover\n          pagination={{\n            defaultCurrent: 2,\n            defaultPageSize: 10,\n            total,\n            showJumper: true,\n            onChange(pageInfo) {\n              setPageSize(pageInfo.pageSize)\n              setPage(pageInfo.current)\n              getData()\n            },\n          }}\n        ></Table>) : (<NoData />)}\n    </div>\n  )\n}\n\nexport default Server;"],"names":["request","options","axios","apiUserLogin","data","method","url","params","apiSysConfig","apiTraceServer","apiTraceList","apiDeleteTrace","id","apiFenceList","apiDeleteFence","fenceId","apiTerminal","apiDeleteTerminalld","config","token","getToken","headers","Authorization","error","Promise","reject","response","status","code","removeToken","window","location","href","MessagePlugin","msg","Error","resolve","message","nodata","className","src","imgUrl","width","height","alt","props","useState","page","setPage","pageSize","setPageSize","setData","total","setTotal","provider","setProvider","getData","item","then","res","items","useEffect","style","value","onChange","val","length","columns","align","ellipsis","colKey","cell","row","title","moment","created","format","updated","fixed","record","onClick","history","push","pathname","state","rowKey","verticalAlign","bordered","hover","pagination","defaultCurrent","defaultPageSize","showJumper","pageInfo","current"],"sourceRoot":""}
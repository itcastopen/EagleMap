{"version":3,"file":"static/js/75.458a4135.chunk.js","mappings":"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","sources":["components/React-CMap.tsx","pages/trajectory/details.tsx","utils/tool.ts"],"sourcesContent":["import { Component, ReactNode } from \"react\";\n\nimport  CMap, { CZMapTP }  from 'czmap';\n\ntype Props = {\n    options: CZMapTP\n}\nexport class CZMap extends Component<Props> {\n    \n    componentDidMount(){\n        new CMap(this.props.options)\n    }\n\n    render(): ReactNode {\n        return (<div id=\"baidumap\" style={{width: '100%', height: '560px'}} ></div>)\n    }\n}","import { Table } from \"tdesign-react\";\nimport {CZMap} from './../../components/React-CMap'\nimport {pathChangeHandle, timeFormat} from '../../utils/tool'\nimport { Breadcrumb } from 'tdesign-react';\nimport moment from 'moment'\nconst { BreadcrumbItem } = Breadcrumb;\n\nfunction TrajectoryDetails(props: any) {\n  const listData = props.location.state\n  const pathData = JSON.parse(listData.pointList)\n  const type = listData.provider === 'BAIDU' ? 'BMAP' : listData.provider\n  const drivingPath = pathData ? pathChangeHandle(type,pathData) : [];\n\n  const options = {\n    id: 'baidumap', // 配置地图的着陆点  id\n    mapAk: '', // 写入Ak\n    poiText: true, //是否显示POI信息\n    poiIcon: true, //是否显示POI图标信息\n    type, // 设置使用地图的类型 BMAP 百度地图、 TMAP 腾讯、、AMAP 高德\n    points: [116.404, 39.915], // 中心点设置 \n    areaName: '上海市', // 中心城市\n    zoom: 15, // 缩放级别 \n    enableScrollWheel: false, // 开启滚轮\n    isScaleCtrl: true, // 添加比例尺控件\n    isZoomCtrl: true, // 添加缩放控件\n    navi3DCtrl: true, // 添加3D控件\n    drivingPath,\n}\n  return (\n    <>\n      <div className=\"BreadcrumbCont\">\n        <Breadcrumb maxItemWidth=\"200px\" theme=\"light\">\n          <BreadcrumbItem href='/trajectory'>轨迹</BreadcrumbItem>\n          <BreadcrumbItem>详情</BreadcrumbItem>\n        </Breadcrumb>\n      </div>\n      <div className=\"container trajectory_details\">\n        <div className=\"detailCont\">\n        <Table\n            data={[listData]}\n            columns={[\n              {\n                align: \"left\",\n                className: \"test\",\n                ellipsis: true,\n                colKey: \"name\",\n                title: \"轨迹名称\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"id\",\n                title: \"轨迹ID\",\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                cell({ row }) {\n                  switch (row?.provider) {\n                    case \"BAIDU\":\n                      return <>百度地图</>;\n                    case \"AMAP\":\n                      return <>高德地图</>;\n                    case \"QQ\":\n                      return <>腾讯地图</>;\n                    default:\n                      return null;\n                  }\n                },\n                title: \"服务商名称\",\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"serverId\",\n                title: \"服务ID\",\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"distance\",\n                title: \"轨迹长度\",\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"time\",\n                title: \"持续时间\",\n                cell({row}){\n                  return timeFormat(row.time)\n                },\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"startTime\",\n                cell({row}){\n                  return row.startTime ? moment(row.startTime).format(\"YYYY-MM-DD HH:mm:ss\") : '--'\n                },\n                title: \"创建时间\",\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"endTime\",\n                cell({row}){\n                  return row.startTime ? moment(row.endTime).format(\"YYYY-MM-DD HH:mm:ss\") : '--'\n                },\n                title: \"结束时间\",\n                minWidth: 200,\n              },\n              {\n                align: \"left\",\n                className: \"test4\",\n                ellipsis: true,\n                colKey: \"size\",\n                title: \"轨迹点数\",\n                minWidth: 200,\n              },\n            ]}\n            rowKey=\"index\"\n            verticalAlign=\"top\"\n            bordered\n            hover\n          ></Table>\n          <div className=\"DetBMap\">\n            <CZMap options={options} />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default TrajectoryDetails\n","\n// 地图路径转换 后台数据转对应数据\nexport function pathChangeHandle(type:string, path:{string:any}[]):[]{\n    let pathList:any = [];\n    if (type === 'BMAP'){\n      pathList = path.map((it:any) => ({'lng': it.longitude, 'lat': it.latitude}))\n    } else if (type === 'AMAP'){\n      pathList = path.map((it:any) => {\n        const point = it.location.split(',')\n        return {'lng':point[0], 'lat':point[1]}\n      })\n    } else if(type === 'TMAP'){\n     console.log(\"开发中...\");\n    }\n    return pathList\n  }\n// 围栏数据转换\n/**\n * 高德：\n圆形围栏数据：\n{\"center\":\"116.344132,40.061937\",\"radius\":5000}\n多边形围栏数据：\n{\"points\":\"116.341622,40.063412;116.346729,40.064546;116.347072,40.060358;116.342373,40.059553\"}\n线形围栏数据：\n{\"bufferradius\":200,\"points\":\"116.347115,40.060325;116.342909,40.05957;116.336493,40.058338\"}\n行政区围栏：\n{\"adcode\":110105}\n\n * 百度：\n圆形围栏数据：\n{\"latitude\":\"40.061937\",\"radius\":5000,\"longitude\":\"116.344132\"}\n多边形围栏数据：\n{\"vertexes\":\"40.063412,116.341622;40.064546,116.346729;40.060358,116.347072;40.059553,116.342373\"}\n线形围栏数据：\n{\"offset\":200,\"vertexes\":\"40.060325,116.347115;40.05957,116.342909;40.058338,116.336493\"}\n行政区围栏：\n{\"keyword\":\"北京市\"}\n * **/\nexport function fenceDataChange(type:string,shape:string,data:any){\n  let fenceData:any = {}\n  // 高德地图 圆形围栏\n  if (type === 'AMAP' && shape === 'CIRCLE'){\n    fenceData.point = data.center.split(',')\n    fenceData.radius = data.radius\n    fenceData.type = 'circle'\n  // 高德地图 多边形围栏\n  } else if ((type === 'AMAP' && shape === 'POLYGON') ){\n    fenceData.type = 'polygon'\n    const dataArray = data.points.split(';')\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[0], lat: point[1]}\n    })\n    // 高德地图 线性形围栏\n  } else if(type === 'AMAP' && shape === 'POLYLINE'){\n    fenceData.type = 'polyline'\n    const dataArray = data.points.split(';')\n    fenceData.offset = data.bufferradius\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[0], lat: point[1]}\n    })\n    // 高德地图 行政区域围栏\n  } else if(type === 'AMAP' && shape === 'DISTRICT'){\n    fenceData.type = 'district'\n    fenceData.adcodes = [data.adcode]\n    // 百度地图 圆形围栏\n  } else if (type === 'BMAP' && shape === 'CIRCLE'){\n    fenceData.point = [data.longitude, data.latitude]\n    fenceData.radius = data.radius\n    fenceData.type = 'circle'\n    // 百度地图 多边形围栏\n  } else if ((type === 'BMAP' && shape === 'POLYGON')){\n    fenceData.type = 'polygon'\n    const dataArray = data.vertexes.split(';')\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[1], lat: point[0]}\n    })\n    // 百度地图 线性形围栏\n  } else if (type === 'BMAP' && shape === 'POLYLINE'){\n    fenceData.type = 'polyline'\n    fenceData.offset = data.offset\n    const dataArray = data.vertexes.split(';')\n    fenceData.points = dataArray.length > 0 && dataArray.map((it:string) => {\n      const point = it.split(',')\n      return {lng:point[1], lat: point[0]}\n    })\n    // 百度地图 行政区域形围栏\n  } else if (type === 'BMAP' && shape === 'DISTRICT'){\n    fenceData.type = 'district'\n    fenceData.proname = data.keyword\n  }\n\n  return fenceData\n}\n// 安毫秒转换为时、（h）、分(m)、秒(s)\nexport function timeFormat(data:string | number):string{\n    let time:string = '--';\n    if (data && data < 60000){\n      time = Number(data)/1000 + 's'\n    }  \n    if (data && data >= 60000 && data < 3600000) {\n      time = Number(data)/60000 + 'm'\n    }\n    if (data && data > 3600000) {\n      time = Number(data)/3600000 + 'H'\n    }\n    return time;\n}"],"names":["CZMap","CMap","this","props","options","id","style","width","height","Component","BreadcrumbItem","Breadcrumb","listData","location","state","pathData","JSON","parse","pointList","type","provider","mapAk","poiText","poiIcon","points","areaName","zoom","enableScrollWheel","isScaleCtrl","isZoomCtrl","navi3DCtrl","drivingPath","pathChangeHandle","className","maxItemWidth","theme","href","data","columns","align","ellipsis","colKey","title","cell","row","minWidth","timeFormat","time","startTime","moment","format","endTime","rowKey","verticalAlign","bordered","hover","path","pathList","map","it","longitude","latitude","point","split","console","log","fenceDataChange","shape","fenceData","center","radius","dataArray","length","lng","lat","offset","bufferradius","adcodes","adcode","vertexes","proname","keyword","Number"],"sourceRoot":""}
{"version":3,"file":"static/js/780.98fad668.chunk.js","mappings":"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","sources":["utils/request.ts","api/api.ts","pages/login/index.tsx"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosError, AxiosResponse } from 'axios';\nimport { MessagePlugin } from 'tdesign-react';\nimport { getToken } from '../utils/cookie';\n\ninterface ResponseData<T> {\n  code: number;\n  data: T;\n  msg: string;\n}\n\n// 指定 axios 请求类型\n\n(axios.defaults.headers as any) = {\n  'Content-Type': 'application/json;charset=utf-8',\n};\n\n// 指定请求地址\naxios.defaults.baseURL = '' // : 'https://mock.boxuegu.com/mock/2894/';\n\n// 添加请求拦截器\naxios.interceptors.request.use(\n  (config: AxiosRequestConfig ) => {\n    const token = getToken();\n    // 获取用户token，用于校验\n    /* eslint-disable  no-param-reassign */\n    if (token) {\n      (config.headers as any).Authorization = token;\n    }\n    return config;\n  },\n  (error: AxiosError) => Promise.reject(error),\n);\n\n// 添加响应拦截器，拦截登录过期或者没有权限\n\naxios.interceptors.response.use(\n  (response: AxiosResponse<ResponseData<any>>) => {\n    if (!response.data) {\n      return Promise.resolve(response);\n    }\n\n    // 请求成功\n    if (response.status === 200) {\n      return response.data as any;\n    }\n\n    // 请求成功，状态不为成功时\n    MessagePlugin.error(response.data.msg);\n\n    return Promise.reject(new Error(response.data.msg));\n  },\n  (error: AxiosError) => {\n    MessagePlugin.error(error.message);\n\n    return Promise.reject(error);\n  },\n);\n\n// 统一发起请求的函数\nexport function request<T>(options: AxiosRequestConfig) {\n  return axios.request<T>(options);\n}\n","import { request } from '../utils/request';\n// import { UserState } from '../store/module/user';\n\nexport interface UserLoginDataRq  {\n  code: number,\n  msg: string,\n  data: {\n    token: string\n  }\n}\n\nexport interface UserLoginData {\n  userName: string;\n  password: string;\n}\n\n// 登录接口\nexport function apiUserLogin(data: UserLoginData) {\n  return request<UserLoginDataRq>({\n    method: 'POST',\n    url: '/sys/login',\n    data,\n    params:data,\n  });\n}\n\n// 系统配置\nexport function apiSysConfig() {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/config',\n  });\n}\n\n// 轨迹服务管理\nexport function apiTraceServer(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace/server',\n    data,\n    params:data,\n  });\n}\n\n// 轨迹列表\nexport function apiTraceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/trace',\n    data,\n    params:data,\n  });\n}\n\n// 删除轨迹\nexport function apiDeleteTrace(data: string) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/trace/${data}`,\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表\nexport function apiFenceList(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/fence',\n    data,\n    params:data,\n  });\n}\n\n// 电子围栏列表详情\nexport function apiFenceDetails(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n  });\n}\n// 删除电子围栏\nexport function apiDeleteFence(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/fence/${data.fenceId}`,\n    data,\n  });\n}\n// 终端列表\nexport function apiTerminal(data: any) {\n  return request<UserLoginDataRq>({\n    method: 'GET',\n    url: '/sys/terminal',\n    data,\n    params:data,\n  });\n}\n\n// 删除终端\nexport function apiDeleteTerminalld(data:any) {\n  return request<UserLoginDataRq>({\n    method: 'DELETE',\n    url: `/sys/terminal/${data.terminalId}`,\n    data,\n  });\n}","import logo from \"./../../assets/images/logo.png\";\nimport { Input, Button, InputValue, MessagePlugin } from \"tdesign-react\";\nimport { useState } from 'react';\nimport { apiUserLogin } from '../../api/api'\nimport { setToken } from \"../../utils/cookie\";\nimport jwt_decode from 'jwt-decode'\nexport interface UserLoginData {\n  userName: string;\n  password: string;\n}\n\nfunction Login(props: any) {\n\n  const [userName, setUsername] = useState('eagle')\n  const [password, setPassword] = useState('eagle')\n\n  function loginHandle(){\n    apiUserLogin({userName, password})\n    .then((res:any) => {\n      if(Number(res.code) === 0){\n        const token = res.data.token ?? res.data\n        const user = jwt_decode(token)\n        setToken(token)\n        props.history.push('/')\n      } else {\n        MessagePlugin.error(res.msg);\n      }\n    })\n  }\n\n  return (\n    <div className=\"Login\">\n      <div className=\"leftCont\"></div>\n      <div className=\"ritCont\">\n        <div className=\"loginCont\">\n          <img src={logo} width=\"179px\" alt=\"\" />\n          <Input\n            placeholder=\"请输入账号\"\n            value={userName}\n            onChange={(value: InputValue) => {\n              setUsername(value.toString())\n            }}\n          />\n          <Input\n            type=\"password\"\n            placeholder=\"请输入密码\"\n            value={password}\n            onChange={(value) => {\n              setPassword(value.toString())\n            }}\n          />\n          <Button shape=\"round\" onClick={loginHandle} variant=\"base\">\n            登录\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"names":["request","options","axios","apiUserLogin","data","method","url","params","apiSysConfig","apiTraceServer","apiTraceList","apiDeleteTrace","apiFenceList","apiDeleteFence","fenceId","apiTerminal","apiDeleteTerminalld","terminalId","config","token","getToken","headers","Authorization","error","Promise","reject","response","status","MessagePlugin","msg","Error","resolve","message","props","useState","userName","setUsername","password","setPassword","className","src","logo","width","alt","I","placeholder","value","onChange","toString","type","shape","onClick","then","res","Number","code","jwt_decode","setToken","history","push","variant"],"sourceRoot":""}